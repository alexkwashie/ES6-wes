<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Arrow Functions</title>
</head>

<style>
    .hl {
        background: yellow;
    }
</style>

<body>
    <div class="bio"></div>

    <ul>
        <li data-time="5:17">Flexbox Video</li>
        <li data-time="8:22">Flexbox Video</li>
        <li data-time="3:34">Redux Video</li>
        <li data-time="5:23">Flexbox Video</li>
        <li data-time="7:12">Flexbox Video</li>
        <li data-time="7:24">Redux Video</li>
        <li data-time="6:46">Flexbox Video</li>
        <li data-time="4:45">Flexbox Video</li>
        <li data-time="4:40">Flexbox Video</li>
        <li data-time="7:58">Redux Video</li>
        <li data-time="11:51">Flexbox Video</li>
        <li data-time="9:13">Flexbox Video</li>
        <li data-time="5:50">Flexbox Video</li>
        <li data-time="5:52">Redux Video</li>
        <li data-time="5:49">Flexbox Video</li>
        <li data-time="8:57">Flexbox Video</li>
        <li data-time="11:29">Flexbox Video</li>
        <li data-time="3:07">Flexbox Video</li>
        <li data-time="5:59">Redux Video</li>
        <li data-time="3:31">Flexbox Video</li>
    </ul>



    <script>
        // Q1. SELECT ALL THE LIST ITEMS ON THE PAGE AND CONVERT TO ARRAY
        //the html tags have not selector eg. Id or class so you select the data attribute with '[]'.Rap in and Array. from.
        const items = Array.from(document.querySelectorAll('[data-time]'));

        // FILTER FOR ONLY THE ELEMENTS THAT CONTAIN THE WORD 'FLEXBOX'
        const filtered = items
            .filter(item => item.textContent.includes('Flexbox'))

        // MAP DOWN TO A LIST OF TIME STRINGS
        .map(item => item.dataset.time)

        // MAP TO AN ARRAY OF SECONDS
        .map(timecode => {
            const parts = timecode.split(":") // split it by the colon ';'


            .map(parts => parseFloat(parts)); //add a map to it and create a function parts which converts the string to an interger from the split.

            return (parts[0] * 60) + parts[1]; //now return the parts from the array by doing the calculations to get the seconds`
        })

        // REDUCE TO GET TOTAL 
        .reduce((runningTotal, seconds) => runningTotal + seconds, 0);
        //Reduce function adds up numbers in an array to a single value i.e the fisrt parameter is the accumulatoer and the 2nd parameter is the the currentValue(parts from the top).the number at the is to add a number to the beginning of the array to make sure it start with '0'. check MDN for more details

        console.log(filtered);
        // ðŸ”¥THIS CAN ALSO BE DONE IN A SINGLE .REDUCE(), BUT WE'RE PRACTICING ARROW FUNCTIONS HERE, SO CHAIN THEM!


        //#########################################################


        // To Set timer, incase you need to do some ajax request in the backgoung...
        const p = new Promise((resolve, reject) => {
            setTimeout(() => {
                reject('All La cool'); //if an erro occcurs
            }, 1000);

        });

        p.then(data => {
            console.log(data); //All La cool
        }).catch(err => {
            console.error(err);
        })
    </script>
</body>

</html>